# ğŸ“Š KAYAK DATABASE SCHEMA - Visual Overview

## ğŸ”· MySQL Tables (10 Total)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CORE ENTITIES                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS        â”‚       â”‚   PAYMENT_METHODSâ”‚       â”‚     ADMINS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK user_id (SSN) â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ FK user_id       â”‚       â”‚ PK admin_id      â”‚
â”‚    first_name    â”‚       â”‚    card_last4    â”‚       â”‚    first_name    â”‚
â”‚    last_name     â”‚       â”‚    card_type     â”‚       â”‚    last_name     â”‚
â”‚    email (UQ)    â”‚       â”‚    expiry_month  â”‚       â”‚    email (UQ)    â”‚
â”‚    password_hash â”‚       â”‚    expiry_year   â”‚       â”‚    password_hash â”‚
â”‚    phone (10)    â”‚       â”‚    billing_zip   â”‚       â”‚    role          â”‚
â”‚    address       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    access_level  â”‚
â”‚    city          â”‚                                  â”‚    last_login    â”‚
â”‚    state (2)     â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    zip_code      â”‚
â”‚    profile_image â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    BOOKINGS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK booking_id    â”‚
â”‚ FK user_id       â”‚â”€â”€â”€â”€â”€â”€â”€â”
â”‚    booking_type  â”‚       â”‚
â”‚    listing_id    â”‚       â”‚ 1:N
â”‚    booking_date  â”‚       â–¼
â”‚    start_date    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    end_date      â”‚  â”‚     BILLING      â”‚
â”‚    num_passengersâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    num_rooms     â”‚  â”‚ PK billing_id    â”‚
â”‚    num_cars      â”‚  â”‚ FK user_id       â”‚
â”‚    status        â”‚  â”‚ FK booking_id    â”‚
â”‚    total_amount  â”‚  â”‚    booking_type  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    amount        â”‚
                      â”‚    payment_methodâ”‚
                      â”‚    status        â”‚
                      â”‚    card_last4    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LISTING ENTITIES                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     FLIGHTS      â”‚     â”‚      HOTELS      â”‚     â”‚       CARS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK flight_id     â”‚     â”‚ PK hotel_id      â”‚     â”‚ PK car_id        â”‚
â”‚    airline_name  â”‚     â”‚    hotel_name    â”‚     â”‚    model         â”‚
â”‚    dept_airport  â”‚     â”‚    address       â”‚     â”‚    car_type      â”‚
â”‚    arrv_airport  â”‚     â”‚    city          â”‚     â”‚    company       â”‚
â”‚    dept_city     â”‚     â”‚    state         â”‚     â”‚    location      â”‚
â”‚    arrv_city     â”‚     â”‚    zip_code      â”‚     â”‚    seats         â”‚
â”‚    dept_time     â”‚     â”‚    star_rating   â”‚     â”‚    transmission  â”‚
â”‚    arrv_time     â”‚     â”‚    total_rooms   â”‚     â”‚    year          â”‚
â”‚    flight_date   â”‚     â”‚    rooms_avail   â”‚     â”‚    daily_price   â”‚
â”‚    duration      â”‚     â”‚    room_type     â”‚     â”‚    cars_avail    â”‚
â”‚    flight_class  â”‚     â”‚    price/night   â”‚     â”‚    rating        â”‚
â”‚    price         â”‚     â”‚    amenities(JSON)â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    total_seats   â”‚     â”‚    rating        â”‚
â”‚    seats_avail   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    rating        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANALYTICS & TRACKING                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLICK_TRACKER   â”‚     â”‚  SEARCH_HISTORY  â”‚     â”‚     VENDORS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK click_id      â”‚     â”‚ PK search_id     â”‚     â”‚ PK vendor_id     â”‚
â”‚    user_id       â”‚     â”‚    user_id       â”‚     â”‚    vendor_name   â”‚
â”‚    page_url      â”‚     â”‚    search_type   â”‚     â”‚    vendor_type   â”‚
â”‚    element_type  â”‚     â”‚    from_location â”‚     â”‚    contact_email â”‚
â”‚    element_id    â”‚     â”‚    to_location   â”‚     â”‚    contact_phone â”‚
â”‚    timestamp     â”‚     â”‚    start_date    â”‚     â”‚    total_props   â”‚
â”‚    session_id    â”‚     â”‚    end_date      â”‚     â”‚    total_revenue â”‚
â”‚    user_agent    â”‚     â”‚    passengers    â”‚     â”‚    rating        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    results_count â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚    timestamp     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¶ MongoDB Collections (4 Total)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONGODB COLLECTIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      REVIEWS         â”‚     â”‚       IMAGES         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id (ObjectId)       â”‚     â”‚ _id (ObjectId)       â”‚
â”‚ user_id              â”‚     â”‚ listing_type         â”‚
â”‚ listing_type         â”‚     â”‚ listing_id           â”‚
â”‚ listing_id           â”‚     â”‚ image_url            â”‚
â”‚ rating (1-5)         â”‚     â”‚ image_type           â”‚
â”‚ comment              â”‚     â”‚ width, height        â”‚
â”‚ helpful_count        â”‚     â”‚ size_bytes           â”‚
â”‚ created_at           â”‚     â”‚ uploaded_at          â”‚
â”‚ updated_at           â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANALYTICS_LOGS      â”‚     â”‚  CLICK_TRACKING      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id (ObjectId)       â”‚     â”‚ _id (ObjectId)       â”‚
â”‚ event_type           â”‚     â”‚ user_id              â”‚
â”‚   (search, view,     â”‚     â”‚ session_id           â”‚
â”‚    click, booking)   â”‚     â”‚ page_url             â”‚
â”‚ user_id              â”‚     â”‚ element_type         â”‚
â”‚ listing_type         â”‚     â”‚ element_id           â”‚
â”‚ listing_id           â”‚     â”‚ coordinates {x,y}    â”‚
â”‚ metadata {}          â”‚     â”‚ timestamp            â”‚
â”‚ timestamp            â”‚     â”‚ viewport {w,h}       â”‚
â”‚ session_id           â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ user_agent           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Key Relationships

```
USERS â”€â”€1:Nâ”€â”€â–º PAYMENT_METHODS
  â”‚
  â”œâ”€â”€1:Nâ”€â”€â–º BOOKINGS â”€â”€1:Nâ”€â”€â–º BILLING
  â”‚
  â”œâ”€â”€1:Nâ”€â”€â–º SEARCH_HISTORY
  â”‚
  â””â”€â”€1:Nâ”€â”€â–º CLICK_TRACKER
```

---

## ğŸ“Š Why This Design?

### MySQL (Transactional Data):
- **ACID compliance** for bookings & billing
- **Foreign keys** ensure referential integrity
- **Complex joins** for reporting (users + bookings + listings)
- **Structured data** with strict validation

### MongoDB (Flexible Data):
- **High write volume** for analytics logs (thousands/sec)
- **Flexible schema** for reviews (varying lengths)
- **Time-series data** for click tracking
- **Nested documents** for metadata

---

## ğŸ¯ For PPT: Use This Diagram

**Slide 2: Database Schema**

Show:
1. **10 MySQL tables** (structured, transactional)
2. **4 MongoDB collections** (flexible, high-volume)
3. **Hybrid approach** justification
4. **Performance benefits** of each database

**Talking Points:**
- "We use MySQL for transactional data requiring ACID compliance"
- "MongoDB handles high-volume analytics (1000s of writes/sec)"
- "Hybrid approach gives us best of both worlds"
- "Foreign keys in MySQL ensure data consistency"

---

**Created:** December 1, 2025  
**Status:** âœ… Ready for Presentation

